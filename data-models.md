# Data Models Reference

This document provides detailed specifications for the data structures used within the application, including fields, data types, and relationships.

## 1. User Data Structure

Represents a user of the application, either a Looker or a Provider.

-   `id`: string (Unique user identifier, typically generated by the authentication service)
-   `role`: string ('Looker' or 'Provider')
-   `name`: string (User's full name)
-   `avatarUrl`: string (URL of the user's avatar image, optional)
-   `email`: string (User's email address, unique, used for authentication)
-   `passwordHash`: string (Hashed password, stored securely in the backend, not exposed to frontend)
-   `phoneNumber`: string (User's phone number, optional)
-   `address`: string (User's address, optional, may be required for Providers for service area)
-   `bio`: string (Provider's biography, only for users with role 'Provider', optional)
-   `serviceIds`: array of strings (List of IDs of services offered by a Provider, only for users with role 'Provider')
-   `achievementIds`: array of strings (List of IDs of earned achievements)
-   `favoriteProviderIds`: array of strings (List of IDs of favorited Providers, only for users with role 'Looker')
-   `paymentMethodTokens`: array of strings (Tokens representing saved payment methods, securely handled via Stripe, not actual card details)
-   `onboardingStatus`: string ('not_started', 'step_1_complete', 'step_2_complete', 'completed') (Tracks Provider onboarding progress, only for users with role 'Provider')
-   `onlineStatus`: boolean (Indicates if the Provider is currently online, only for users with role 'Provider')
-   `lastActive`: timestamp (Timestamp of the Provider's last activity, used for determining online status, only for users with role 'Provider')
-   `createdAt`: timestamp (Timestamp when the user account was created)
-   `updatedAt`: timestamp (Timestamp when the user data was last updated)

## 2. Service Data Structure

Represents a specific beauty service offered by a Provider.

-   `id`: string (Unique service identifier)
-   `name`: string (Specific name of the service as listed, e.g., "Gel Manicure", "Box Braids", "Classic Facial")
-   `category`: string (Category of the service, e.g., "Nails")
-   `subCategory`: string (Sub-category of the service, e.g., "Gel / Shellac", optional)
-   `description`: string (Detailed description of the service)
-   `locationType`: string ('provider_location', 'looker_location', 'both') (Indicates where the service can be provided. For Hair services, this will likely be 'provider_location' or 'both' depending on Provider setup.)
-   `price`: number (Starting price of the service, in the application's currency)
-   `duration`: number (Estimated duration of the service in minutes)
-   `tags`: array of strings (List of keywords/tags associated with the service for search and filtering)
-   `galleryImageUrls`: array of strings (List of URLs of images showcasing the service, optional)
-   `providerId`: string (ID of the Provider offering this service)
-   `createdAt`: timestamp (Timestamp when the service was created)
-   `updatedAt`: timestamp (Timestamp when the service was last updated)

## 3. Booking Data Structure

Represents a confirmed or pending appointment between a Looker and a Provider.

-   `id`: string (Unique booking identifier)
-   `lookerId`: string (ID of the Looker who created the booking, references User data)
-   `providerId`: string (ID of the Provider for the booking, references User data)
-   `serviceIds`: array of strings (List of IDs of the services booked in this session, references Service data)
-   `dateTime`: timestamp (Date and time of the booking)
-   `status`: string ('pending_provider_confirmation', 'awaiting_reservation', 'confirmed', 'completed', 'cancelled') (Current status of the booking)
-   `basePrice`: number (The price of the services before any tip)
-   `tipAmount`: number (Optional tip amount added by the Looker, 0 by default)
-   `totalPrice`: number (Final price of the booking, basePrice + tipAmount)
-   `paymentStatus`: string ('pending_authorization', 'authorized', 'captured', 'failed', 'refunded') (Status of the payment)
-   `paymentIntentId`: string (ID of the Stripe Payment Intent associated with this booking)
-   `reviewId`: string (ID of the review associated with this booking, references Review data, optional)
-   `customRequestDetails`: object (Details of a custom service request if applicable, optional)
    -   `requestedServiceName`: string
    -   `notes`: string
-   `createdAt`: timestamp (Timestamp when the booking request was created)
-   `updatedAt`: timestamp (Timestamp when the booking data was last updated)

## 4. Message Data Structure

Represents a single message within a conversation between a Looker and a Provider.

-   `id`: string (Unique message identifier)
-   `conversationId`: string (ID of the conversation the message belongs to, references Conversation data)
-   `senderId`: string (ID of the user who sent the message, references User data)
-   `text`: string (Content of the message, optional)
-   `imageUrl`: string (URL of an image attached to the message, optional)
-   `timestamp`: timestamp (Timestamp when the message was sent)
-   `read`: boolean (Indicates if the message has been read by the recipient)
-   `systemMessage`: boolean (Indicates if it's a system-generated message, e.g., "Booking confirmed for...")
-   `bookingId`: string (ID of the booking context for system messages or messages related to a specific booking, references Booking data, optional)

## 5. Conversation Data Structure

Represents a conversation thread between a Looker and a Provider.

-   `id`: string (Unique conversation identifier)
-   `lookerId`: string (ID of the Looker in the conversation, references User data)
-   `providerId`: string (ID of the Provider in the conversation, references User data)
-   `lastMessageId`: string (ID of the most recent message in the conversation, references Message data)
-   `unreadCount`: number (Number of unread messages for the current user in this conversation)
-   `bookingId`: string (ID of the booking associated with this conversation, references Booking data, optional)
-   `createdAt`: timestamp (Timestamp when the conversation was created)
-   `updatedAt`: timestamp (Timestamp when the conversation was last updated with a new message)

## 6. Review Data Structure

Represents a review submitted by a Looker for a completed booking.

-   `id`: string (Unique review identifier)
-   `bookingId`: string (ID of the booking the review is for, references Booking data)
-   `lookerId`: string (ID of the Looker who wrote the review, references User data)
-   `providerId`: string (ID of the Provider being reviewed, references User data)
-   `overallRating`: number (Overall rating out of 5)
-   `text`: string (Review text, optional)
-   `imageUrls`: array of strings (List of URLs of images included in the review, optional)
-   `timestamp`: timestamp (Timestamp when the review was submitted)
-   `categoryRatings`: object (Ratings for specific categories)
    -   `cleanliness`: number (Rating out of 5)
    -   `punctuality`: number (Rating out of 5)
    -   `skill`: number (Rating out of 5)
    -   `professionalism`: number (Rating out of 5)
-   `createdAt`: timestamp (Timestamp when the review was created)
-   `updatedAt`: timestamp (Timestamp when the review was last updated)

## 7. Achievement Data Structure

Represents a badge or milestone earned by a user.

-   `id`: string (Unique achievement instance identifier)
-   `userId`: string (ID of the user who earned the achievement, references User data)
-   `badgeKey`: string (A unique key identifying the type of badge, e.g., 'gel_manicure_skill', 'top_rated', '50_bookings')
-   `category`: string ('skill', 'reputation', 'milestone')
-   `level`: number (Current level of the badge, 0 for non-leveled or Declared, 1-3 for leveled)
-   `progress`: number (Current progress towards the next level, 0-1, only for leveled badges)
-   `earnedDate`: timestamp (Timestamp when the achievement was first earned or last leveled up)
-   `criteriaMet`: object (Details on criteria met for the current level, specific to each badge type)

## 8. Badge Definition Data Structure (Backend Reference)

This structure would likely be used internally in the backend to define the different types of badges and their criteria. Not directly exposed to the frontend as a primary data model, but the Achievement data references it.

-   `badgeKey`: string (Unique key for the badge type)
-   `name`: string (Display name of the badge)
-   `category`: string ('skill', 'reputation', 'milestone')
-   `description`: string (General description of the badge)
-   `levels`: array of objects (For leveled badges)
    -   `level`: number
    -   `name`: string (Level name, e.g., 'Verified', 'Expert')
    -   `criteria`: string (Description of criteria for this level)
    -   `iconUrl`: string (URL for the icon at this level)
-   `iconUrl`: string (URL for the icon for non-leveled badges)

## 9. Marketplace Request Data Structure

Represents a request from a Looker for a service not currently offered.

-   `id`: string (Unique request identifier)
-   `lookerId`: string (ID of the Looker who submitted the request, references User data)
-   `requestedServiceName`: string (Name of the requested service)
-   `lookerArea`: string (General area of the Looker)
-   `notes`: string (Additional notes from the Looker, optional)
-   `notificationOptIn`: boolean (Indicates if the Looker opted in for notifications about this service)
-   `timestamp`: timestamp (Timestamp when the request was submitted)
-   `status`: string ('open', 'reviewed', 'added_to_services') (Status of the request)
-   `createdAt`: timestamp (Timestamp when the request was created)
-   `updatedAt`: timestamp (Timestamp when the request status was last updated)